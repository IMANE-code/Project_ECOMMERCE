@{
    ViewData["Title"] = "Catégories";
}


<div>
    <div class="mb-2 row container-fluid">
        <div class="col pl-0"><a asp-controller="Home" asp-action="Add" class="btn btn-primary">Add</a></div>


        <form class="form-inline mb-2">
            <div class="form-group">
                <label for="search">Search</label>
                <input id="search" class="form-control mx-sm-3 pr-0">

            </div>
        </form>

        <table class="display table table-bordered" id="employee_table">
            <thead class="table-dark">
                <tr>
                    <th scope="col">id</th>
                    <th scope="col">Name</th>
                    <th scope="col">Image</th>
                    <th scope="col">Action</th>
                </tr>
            </thead>
            <tbody id="listcat">
            </tbody>
        </table>
    </div>
</div>
@{
    <script>
        $(document).ready(function () {
            var listcat = $('#listcat');
            $(document).ready(function () {
                $.ajax({
                    url: 'https://localhost:44318/api/Catégories/GetAll',
                    method: 'get',
                    contentType: "application/x-www-form-urlencoded",
                    success: function (data) {

                        $.each(data, function (index, val) {
                            var id = val.id;
                            var name = val.nameCatégorie;
                            var image = val.imageCatégorie;

                            var base64 = Convert.ToBase64String(image);
                            var imgSrc = String.Format("data:image/gif;base64,{0}", base64);

                            console.log(imgSrc);
                            listcat.append('<tr><td> ahmed </td><td>' + name + '</td><td>' + image + '</td></tr>')
                        });

                    }, error: function (err) {
                        console.log(err)

                    }
                })
            });

        });
    </script>
}